# SOME DESCRIPTIVE TITLE
# Copyright (C) YEAR Free Software Foundation, Inc.
# This file is distributed under the same license as the PACKAGE package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: PACKAGE VERSION\n"
"POT-Creation-Date: 2012-03-26 23:32-0500\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"Language: \n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#. type: Plain text
#: orig/tutorial04.txt:1
#, no-wrap
msgid "=====================================\n"
msgstr ""

#. type: Plain text
#: orig/tutorial04.txt:3
#, no-wrap
msgid ""
"Writing your first Django app, part 4\n"
"=====================================\n"
msgstr ""

#. type: Plain text
#: orig/tutorial04.txt:8
msgid ""
"This tutorial begins where :doc:`Tutorial 3 </intro/tutorial03>` left off. "
"We're continuing the Web-poll application and will focus on simple form "
"processing and cutting down our code."
msgstr ""

#. type: Plain text
#: orig/tutorial04.txt:10
#, no-wrap
msgid ""
"Write a simple form\n"
"===================\n"
msgstr ""

#. type: Plain text
#: orig/tutorial04.txt:14
msgid ""
"Let's update our poll detail template (\"polls/detail.html\") from the last "
"tutorial, so that the template contains an HTML ``<form>`` element:"
msgstr ""

#. type: Plain text
#: orig/tutorial04.txt:16 orig/tutorial04.txt:166
msgid ".. code-block:: html+django"
msgstr ""

#. type: Plain text
#: orig/tutorial04.txt:18 orig/tutorial04.txt:168
#, no-wrap
msgid "    <h1>{{ poll.question }}</h1>\n"
msgstr ""

#. type: Plain text
#: orig/tutorial04.txt:20
#, no-wrap
msgid "    {% if error_message %}<p><strong>{{ error_message }}</strong></p>{% endif %}\n"
msgstr ""

#. type: Plain text
#: orig/tutorial04.txt:29
#, no-wrap
msgid ""
"    <form action=\"/polls/{{ poll.id }}/vote/\" method=\"post\">\n"
"    {% csrf_token %}\n"
"    {% for choice in poll.choice_set.all %}\n"
"        <input type=\"radio\" name=\"choice\" id=\"choice{{ forloop.counter }}\" value=\"{{ choice.id }}\" />\n"
"        <label for=\"choice{{ forloop.counter }}\">{{ choice.choice }}</label><br />\n"
"    {% endfor %}\n"
"    <input type=\"submit\" value=\"Vote\" />\n"
"    </form>\n"
msgstr ""

#. type: Plain text
#: orig/tutorial04.txt:31
msgid "A quick rundown:"
msgstr ""

#. type: Bullet: '* '
#: orig/tutorial04.txt:37
msgid ""
"The above template displays a radio button for each poll choice. The "
"``value`` of each radio button is the associated poll choice's ID. The "
"``name`` of each radio button is ``\"choice\"``. That means, when somebody "
"selects one of the radio buttons and submits the form, it'll send the POST "
"data ``choice=3``. This is HTML Forms 101."
msgstr ""

#. type: Bullet: '* '
#: orig/tutorial04.txt:44
msgid ""
"We set the form's ``action`` to ``/polls/{{ poll.id }}/vote/``, and we set "
"``method=\"post\"``. Using ``method=\"post\"`` (as opposed to ``method=\"get"
"\"``) is very important, because the act of submitting this form will alter "
"data server-side. Whenever you create a form that alters data server-side, "
"use ``method=\"post\"``. This tip isn't specific to Django; it's just good "
"Web development practice."
msgstr ""

#. type: Bullet: '* '
#: orig/tutorial04.txt:47
msgid ""
"``forloop.counter`` indicates how many times the :ttag:`for` tag has gone "
"through its loop"
msgstr ""

#. type: Bullet: '* '
#: orig/tutorial04.txt:54
msgid ""
"Since we're creating a POST form (which can have the effect of modifying "
"data), we need to worry about Cross Site Request Forgeries.  Thankfully, you "
"don't have to worry too hard, because Django comes with a very easy-to-use "
"system for protecting against it. In short, all POST forms that are targeted "
"at internal URLs should use the :ttag:`{% csrf_token %}<csrf_token>` "
"template tag."
msgstr ""

#. type: Plain text
#: orig/tutorial04.txt:59
msgid ""
"The :ttag:`{% csrf_token %}<csrf_token>` tag requires information from the "
"request object, which is not normally accessible from within the template "
"context. To fix this, a small adjustment needs to be made to the ``detail`` "
"view, so that it looks like the following::"
msgstr ""

#. type: Plain text
#: orig/tutorial04.txt:66
#, no-wrap
msgid ""
"    from django.template import RequestContext\n"
"    # ...\n"
"    def detail(request, poll_id):\n"
"        p = get_object_or_404(Poll, pk=poll_id)\n"
"        return render_to_response('polls/detail.html', {'poll': p},\n"
"                                   context_instance=RequestContext(request))\n"
msgstr ""

#. type: Plain text
#: orig/tutorial04.txt:69
msgid ""
"The details of how this works are explained in the documentation for :ref:"
"`RequestContext <subclassing-context-requestcontext>`."
msgstr ""

#. type: Plain text
#: orig/tutorial04.txt:73
msgid ""
"Now, let's create a Django view that handles the submitted data and does "
"something with it. Remember, in :doc:`Tutorial 3 </intro/tutorial03>`, we "
"created a URLconf for the polls application that includes this line::"
msgstr ""

#. type: Plain text
#: orig/tutorial04.txt:75
#, no-wrap
msgid "    (r'^(?P<poll_id>\\d+)/vote/$', 'vote'),\n"
msgstr ""

#. type: Plain text
#: orig/tutorial04.txt:78
msgid ""
"We also created a dummy implementation of the ``vote()`` function. Let's "
"create a real version. Add the following to ``polls/views.py``::"
msgstr ""

#. type: Plain text
#: orig/tutorial04.txt:102
#, no-wrap
msgid ""
"    from django.shortcuts import get_object_or_404, render_to_response\n"
"    from django.http import HttpResponseRedirect, HttpResponse\n"
"    from django.core.urlresolvers import reverse\n"
"    from django.template import RequestContext\n"
"    from polls.models import Choice, Poll\n"
"    # ...\n"
"    def vote(request, poll_id):\n"
"        p = get_object_or_404(Poll, pk=poll_id)\n"
"        try:\n"
"            selected_choice = p.choice_set.get(pk=request.POST['choice'])\n"
"        except (KeyError, Choice.DoesNotExist):\n"
"            # Redisplay the poll voting form.\n"
"            return render_to_response('polls/detail.html', {\n"
"                'poll': p,\n"
"                'error_message': \"You didn't select a choice.\",\n"
"            }, context_instance=RequestContext(request))\n"
"        else:\n"
"            selected_choice.votes += 1\n"
"            selected_choice.save()\n"
"            # Always return an HttpResponseRedirect after successfully dealing\n"
"            # with POST data. This prevents data from being posted twice if a\n"
"            # user hits the Back button.\n"
"            return HttpResponseRedirect(reverse('polls.views.results', args=(p.id,)))\n"
msgstr ""

#. type: Plain text
#: orig/tutorial04.txt:104
msgid ""
"This code includes a few things we haven't covered yet in this tutorial:"
msgstr ""

#. type: Bullet: '* '
#: orig/tutorial04.txt:110
msgid ""
":attr:`request.POST <django.http.HttpRequest.POST>` is a dictionary-like "
"object that lets you access submitted data by key name. In this case, "
"``request.POST['choice']`` returns the ID of the selected choice, as a "
"string. :attr:`request.POST <django.http.HttpRequest.POST>` values are "
"always strings."
msgstr ""

#. type: Plain text
#: orig/tutorial04.txt:116
#, no-wrap
msgid ""
"  Note that Django also provides :attr:`request.GET\n"
"  <django.http.HttpRequest.GET>` for accessing GET data in the same way --\n"
"  but we're explicitly using :attr:`request.POST\n"
"  <django.http.HttpRequest.POST>` in our code, to ensure that data is only\n"
"  altered via a POST call.\n"
msgstr ""

#. type: Bullet: '* '
#: orig/tutorial04.txt:120
msgid ""
"``request.POST['choice']`` will raise :exc:`KeyError` if ``choice`` wasn't "
"provided in POST data. The above code checks for :exc:`KeyError` and "
"redisplays the poll form with an error message if ``choice`` isn't given."
msgstr ""

#. type: Bullet: '* '
#: orig/tutorial04.txt:127
msgid ""
"After incrementing the choice count, the code returns an :class:`~django."
"http.HttpResponseRedirect` rather than a normal :class:`~django.http."
"HttpResponse`.  :class:`~django.http.HttpResponseRedirect` takes a single "
"argument: the URL to which the user will be redirected (see the following "
"point for how we construct the URL in this case)."
msgstr ""

#. type: Plain text
#: orig/tutorial04.txt:132
#, no-wrap
msgid ""
"  As the Python comment above points out, you should always return an\n"
"  :class:`~django.http.HttpResponseRedirect` after successfully dealing with\n"
"  POST data. This tip isn't specific to Django; it's just good Web\n"
"  development practice.\n"
msgstr ""

#. type: Bullet: '* '
#: orig/tutorial04.txt:141
msgid ""
"We are using the :func:`~django.core.urlresolvers.reverse` function in the :"
"class:`~django.http.HttpResponseRedirect` constructor in this example.  This "
"function helps avoid having to hardcode a URL in the view function.  It is "
"given the name of the view that we want to pass control to and the variable "
"portion of the URL pattern that points to that view. In this case, using the "
"URLconf we set up in Tutorial 3, this :func:`~django.core.urlresolvers."
"reverse` call will return a string like ::"
msgstr ""

#. type: Plain text
#: orig/tutorial04.txt:143
#, no-wrap
msgid "    '/polls/3/results/'\n"
msgstr ""

#. type: Plain text
#: orig/tutorial04.txt:147
#, no-wrap
msgid ""
"  ... where the ``3`` is the value of ``p.id``. This redirected URL will\n"
"  then call the ``'results'`` view to display the final page. Note that you\n"
"  need to use the full name of the view here (including the prefix).\n"
msgstr ""

#. type: Plain text
#: orig/tutorial04.txt:151
msgid ""
"As mentioned in Tutorial 3, ``request`` is a :class:`~django.http."
"HttpRequest` object. For more on :class:`~django.http.HttpRequest` objects, "
"see the :doc:`request and response documentation </ref/request-response>`."
msgstr ""

#. type: Plain text
#: orig/tutorial04.txt:154
msgid ""
"After somebody votes in a poll, the ``vote()`` view redirects to the results "
"page for the poll. Let's write that view::"
msgstr ""

#. type: Plain text
#: orig/tutorial04.txt:158
#, no-wrap
msgid ""
"    def results(request, poll_id):\n"
"        p = get_object_or_404(Poll, pk=poll_id)\n"
"        return render_to_response('polls/results.html', {'poll': p})\n"
msgstr ""

#. type: Plain text
#: orig/tutorial04.txt:162
msgid ""
"This is almost exactly the same as the ``detail()`` view from :doc:`Tutorial "
"3 </intro/tutorial03>`. The only difference is the template name. We'll fix "
"this redundancy later."
msgstr ""

#. type: Plain text
#: orig/tutorial04.txt:164
msgid "Now, create a ``results.html`` template:"
msgstr ""

#. type: Plain text
#: orig/tutorial04.txt:174
#, no-wrap
msgid ""
"    <ul>\n"
"    {% for choice in poll.choice_set.all %}\n"
"        <li>{{ choice.choice }} -- {{ choice.votes }} vote{{ choice.votes|pluralize }}</li>\n"
"    {% endfor %}\n"
"    </ul>\n"
msgstr ""

#. type: Plain text
#: orig/tutorial04.txt:176
#, no-wrap
msgid "    <a href=\"/polls/{{ poll.id }}/\">Vote again?</a>\n"
msgstr ""

#. type: Plain text
#: orig/tutorial04.txt:180
msgid ""
"Now, go to ``/polls/1/`` in your browser and vote in the poll. You should "
"see a results page that gets updated each time you vote. If you submit the "
"form without having chosen a choice, you should see the error message."
msgstr ""

#. type: Plain text
#: orig/tutorial04.txt:182
#, no-wrap
msgid ""
"Use generic views: Less code is better\n"
"======================================\n"
msgstr ""

#. type: Plain text
#: orig/tutorial04.txt:187
msgid ""
"The ``detail()`` (from :doc:`Tutorial 3 </intro/tutorial03>`) and ``results()"
"`` views are stupidly simple -- and, as mentioned above, redundant. The "
"``index()`` view (also from Tutorial 3), which displays a list of polls, is "
"similar."
msgstr ""

#. type: Plain text
#: orig/tutorial04.txt:192
msgid ""
"These views represent a common case of basic Web development: getting data "
"from the database according to a parameter passed in the URL, loading a "
"template and returning the rendered template. Because this is so common, "
"Django provides a shortcut, called the \"generic views\" system."
msgstr ""

#. type: Plain text
#: orig/tutorial04.txt:195
msgid ""
"Generic views abstract common patterns to the point where you don't even "
"need to write Python code to write an app."
msgstr ""

#. type: Plain text
#: orig/tutorial04.txt:199
msgid ""
"Let's convert our poll app to use the generic views system, so we can delete "
"a bunch of our own code. We'll just have to take a few steps to make the "
"conversion. We will:"
msgstr ""

#. type: Bullet: '1. '
#: orig/tutorial04.txt:201
msgid "Convert the URLconf."
msgstr ""

#. type: Bullet: '2. '
#: orig/tutorial04.txt:203
msgid "Delete some of the old, unneeded views."
msgstr ""

#. type: Bullet: '3. '
#: orig/tutorial04.txt:205
msgid "Fix up URL handling for the new views."
msgstr ""

#. type: Plain text
#: orig/tutorial04.txt:207
msgid "Read on for details."
msgstr ""

#. type: Plain text
#: orig/tutorial04.txt:209
msgid ".. admonition:: Why the code-shuffle?"
msgstr ""

#. type: Plain text
#: orig/tutorial04.txt:215
#, no-wrap
msgid ""
"    Generally, when writing a Django app, you'll evaluate whether generic views\n"
"    are a good fit for your problem, and you'll use them from the beginning,\n"
"    rather than refactoring your code halfway through. But this tutorial\n"
"    intentionally has focused on writing the views \"the hard way\" until now, to\n"
"    focus on core concepts.\n"
msgstr ""

#. type: Plain text
#: orig/tutorial04.txt:217
#, no-wrap
msgid "    You should know basic math before you start using a calculator.\n"
msgstr ""

#. type: Plain text
#: orig/tutorial04.txt:220
msgid ""
"First, open the ``polls/urls.py`` URLconf. It looks like this, according to "
"the tutorial so far::"
msgstr ""

#. type: Plain text
#: orig/tutorial04.txt:222
#, no-wrap
msgid "    from django.conf.urls import patterns, include, url\n"
msgstr ""

#. type: Plain text
#: orig/tutorial04.txt:229
#, no-wrap
msgid ""
"    urlpatterns = patterns('polls.views',\n"
"        url(r'^$', 'index'),\n"
"        url(r'^(?P<poll_id>\\d+)/$', 'detail'),\n"
"        url(r'^(?P<poll_id>\\d+)/results/$', 'results'),\n"
"        url(r'^(?P<poll_id>\\d+)/vote/$', 'vote'),\n"
"    )\n"
msgstr ""

#. type: Plain text
#: orig/tutorial04.txt:231
msgid "Change it like so::"
msgstr ""

#. type: Plain text
#: orig/tutorial04.txt:235
#, no-wrap
msgid ""
"    from django.conf.urls import patterns, include, url\n"
"    from django.views.generic import DetailView, ListView\n"
"    from polls.models import Poll\n"
msgstr ""

#. type: Plain text
#: orig/tutorial04.txt:253
#, no-wrap
msgid ""
"    urlpatterns = patterns('',\n"
"        url(r'^$',\n"
"            ListView.as_view(\n"
"                queryset=Poll.objects.order_by('-pub_date')[:5],\n"
"                context_object_name='latest_poll_list',\n"
"                template_name='polls/index.html')),\n"
"        url(r'^(?P<pk>\\d+)/$',\n"
"            DetailView.as_view(\n"
"                model=Poll,\n"
"                template_name='polls/detail.html')),\n"
"        url(r'^(?P<pk>\\d+)/results/$',\n"
"            DetailView.as_view(\n"
"                model=Poll,\n"
"                template_name='polls/results.html'),\n"
"            name='poll_results'),\n"
"        url(r'^(?P<poll_id>\\d+)/vote/$', 'polls.views.vote'),\n"
"    )\n"
msgstr ""

#. type: Plain text
#: orig/tutorial04.txt:259
msgid ""
"We're using two generic views here: :class:`~django.views.generic.list."
"ListView` and :class:`~django.views.generic.detail.DetailView`. "
"Respectively, those two views abstract the concepts of \"display a list of "
"objects\" and \"display a detail page for a particular type of object.\""
msgstr ""

#. type: Bullet: '* '
#: orig/tutorial04.txt:262
msgid ""
"Each generic view needs to know what model it will be acting upon. This is "
"provided using the ``model`` parameter."
msgstr ""

#. type: Bullet: '* '
#: orig/tutorial04.txt:267
msgid ""
"The :class:`~django.views.generic.list.DetailView` generic view expects the "
"primary key value captured from the URL to be called ``\"pk\"``, so we've "
"changed ``poll_id`` to ``pk`` for the generic views."
msgstr ""

#. type: Bullet: '* '
#: orig/tutorial04.txt:276
msgid ""
"We've added a name, ``poll_results``, to the results view so that we have a "
"way to refer to its URL later on (see the documentation about :ref:`naming "
"URL patterns <naming-url-patterns>` for information). We're also using the :"
"func:`~django.conf.urls.url` function from :mod:`django.conf.urls` here. "
"It's a good habit to use :func:`~django.conf.urls.url` when you are "
"providing a pattern name like this."
msgstr ""

#. type: Plain text
#: orig/tutorial04.txt:286
msgid ""
"By default, the :class:`~django.views.generic.list.DetailView` generic view "
"uses a template called ``<app name>/<model name>_detail.html``.  In our "
"case, it'll use the template ``\"polls/poll_detail.html\"``. The "
"``template_name`` argument is used to tell Django to use a specific template "
"name instead of the autogenerated default template name. We also specify the "
"``template_name`` for the ``results`` list view -- this ensures that the "
"results view and the detail view have a different appearance when rendered, "
"even though they're both a :class:`~django.views.generic.list.DetailView` "
"behind the scenes."
msgstr ""

#. type: Plain text
#: orig/tutorial04.txt:292
msgid ""
"Similarly, the :class:`~django.views.generic.list.ListView` generic view "
"uses a default template called ``<app name>/<model name>_list.html``; we use "
"``template_name`` to tell :class:`~django.views.generic.list.ListView` to "
"use our existing ``\"polls/index.html\"`` template."
msgstr ""

#. type: Plain text
#: orig/tutorial04.txt:304
msgid ""
"In previous parts of the tutorial, the templates have been provided with a "
"context that contains the ``poll`` and ``latest_poll_list`` context "
"variables. For DetailView the ``poll`` variable is provided automatically -- "
"since we're using a Django model (``Poll``), Django is able to determine an "
"appropriate name for the context variable.  However, for ListView, the "
"automatically generated context variable is ``poll_list``. To override this "
"we provide the ``context_object_name`` option, specifying that we want to "
"use ``latest_poll_list`` instead.  As an alternative approach, you could "
"change your templates to match the new default context variables -- but it's "
"a lot easier to just tell Django to use the variable you want."
msgstr ""

#. type: Plain text
#: orig/tutorial04.txt:308
msgid ""
"You can now delete the ``index()``, ``detail()`` and ``results()`` views "
"from ``polls/views.py``. We don't need them anymore -- they have been "
"replaced by generic views."
msgstr ""

#. type: Plain text
#: orig/tutorial04.txt:317
msgid ""
"The last thing to do is fix the URL handling to account for the use of "
"generic views. In the vote view above, we used the :func:`~django.core."
"urlresolvers.reverse` function to avoid hard-coding our URLs. Now that we've "
"switched to a generic view, we'll need to change the :func:`~django.core."
"urlresolvers.reverse` call to point back to our new generic view. We can't "
"simply use the view function anymore -- generic views can be (and are) used "
"multiple times -- but we can use the name we've given::"
msgstr ""

#. type: Plain text
#: orig/tutorial04.txt:319
#, no-wrap
msgid "    return HttpResponseRedirect(reverse('poll_results', args=(p.id,)))\n"
msgstr ""

#. type: Plain text
#: orig/tutorial04.txt:321
msgid "Run the server, and use your new polling app based on generic views."
msgstr ""

#. type: Plain text
#: orig/tutorial04.txt:324
msgid ""
"For full details on generic views, see the :doc:`generic views documentation "
"</topics/http/generic-views>`."
msgstr ""

#. type: Plain text
#: orig/tutorial04.txt:326
#, no-wrap
msgid ""
"Coming soon\n"
"===========\n"
msgstr ""

#. type: Plain text
#: orig/tutorial04.txt:330
msgid ""
"The tutorial ends here for the time being. Future installments of the "
"tutorial will cover:"
msgstr ""

#. type: Bullet: '* '
#: orig/tutorial04.txt:337
msgid "Advanced form processing"
msgstr ""

#. type: Bullet: '* '
#: orig/tutorial04.txt:337
msgid "Using the RSS framework"
msgstr ""

#. type: Bullet: '* '
#: orig/tutorial04.txt:337
msgid "Using the cache framework"
msgstr ""

#. type: Bullet: '* '
#: orig/tutorial04.txt:337
msgid "Using the comments framework"
msgstr ""

#. type: Bullet: '* '
#: orig/tutorial04.txt:337
msgid "Advanced admin features: Permissions"
msgstr ""

#. type: Bullet: '* '
#: orig/tutorial04.txt:337
msgid "Advanced admin features: Custom JavaScript"
msgstr ""

#. type: Plain text
#: orig/tutorial04.txt:339
msgid ""
"In the meantime, you might want to check out some pointers on :doc:`where to "
"go from here </intro/whatsnext>`"
msgstr ""
